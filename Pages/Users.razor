@page "/user"
@* This Razor page allows users to search users *@
@inject SpotifyService _spotifyService
@using SpotifyApp.Services
@using blazorappca.Models

<h1>User Information</h1>

<h3>Search for a User</h3>


<input type="text" @bind="searchQuery" />
<button @onclick="SearchUser">Search</button>

@if (userResults != null)
{
    <h4>Search Results:</h4>
    <ul>
        @foreach (var user in userResults)
        {
            <li>@user.Name by @user.FollowersCount <a href="@user.ImageUrl" target="_blank">User Profile Picture</a></li>
        }
    </ul>
}

@code {
    private List<UserData> userResults;
    private string searchQuery;

    private async Task SearchUser()
    {
        if (!string.IsNullOrEmpty(searchQuery))
        {
            userResults = await _spotifyService.SearchUser(searchQuery);
        }
    }
}